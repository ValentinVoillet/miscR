% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_bg_adjustment.R
\name{calculate_bg_adjustment}
\alias{calculate_bg_adjustment}
\title{Background Adjustment for Cytometry Data}
\usage{
calculate_bg_adjustment(
  x,
  neg_id = "negctrl",
  group_cols = c("PROTOCOL", "LABID", "ASSAYID", "PTID", "VISITNO", "RUNNUM", "SUBSET")
)
}
\arguments{
\item{x}{A data.frame or tibble containing cytometry results.}

\item{neg_id}{Character. The identifier used in the `ANTIGEN` column for the negative control.
Default is `"negctrl"`.}

\item{group_cols}{A character vector of column names used to uniquely identify a biological sample
(e.g., Subject ID, Visit, Lab ID).}
}
\value{
A data.frame (or tibble) containing the original columns plus:
\item{NSUB_NEG}{Number of cells in the negative control}
\item{CYTNUM_NEG}{Number of positive cells in the negative control}
\item{PCTPOS}{Percentage of positive cells in the stimulated sample}
\item{PCTPOS_NEG}{Percentage of positive cells in the negative control}
\item{PCTPOS_ADJ}{Adjusted percentage (Stimulated - Negative Control)}
}
\description{
This function identifies negative control samples (background) and subtracts their
percentage of positive cells from the stimulated samples. It calculates
`PCTPOS`, `PCTPOS_NEG`, and the adjusted value `PCTPOS_ADJ`.
}
\examples{
\dontrun{
# Example usage:
clean_data <- calculate_bg_adjustment(my_data, neg_id = "negctrl")
}
}
